# ADR-009: Jarvis 風格 3D 視覺化設計

---

**狀態 (Status):** `已接受 (Accepted)`

**決策者 (Deciders):** `PM, Technical Lead, UX Designer`

**日期 (Date):** `2025-10-17`

**技術顧問 (Consulted - 選填):** `Frontend DEV, 3D Artist`

**受影響團隊 (Informed - 選填):** `All Development Team`

---

## 1. 背景與問題陳述 (Context and Problem Statement)

*   **上下文 (Context):** AI Audio Chat Visualizer 的核心差異化特色是「3D 音訊視覺化」(參考 ADR-002)。在完成基礎技術架構 (ADR-001~008) 後,PM 明確提出**視覺風格需求**：希望前端呈現模仿 **Iron Man 的 Jarvis** 全息投影風格,並融合**太陽系/宇宙/行星系/核融合**的科幻美學。此需求旨在提升產品的**視覺衝擊力**與**品牌辨識度**,在競品中建立獨特定位。

*   **問題陳述 (Problem Statement):** 當前 ADR-002 (3D 引擎選擇) 與 ADR-008 (多模態互動設計) 僅定義了**技術框架**與**功能需求**,但**缺乏明確的視覺設計語言**,導致以下問題：

    1.  **視覺風格未定義**:
        *   Three.js 可以實現各種 3D 效果,但缺乏統一的美學方向
        *   開發團隊無法確定粒子系統、材質、顏色、動畫風格
        *   預估導致 **20-30%** 開發時間浪費在試錯上

    2.  **UI 複雜度過高**:
        *   ADR-008 設計了多按鈕輸入介面 `[🎤] [📷] [📝] [發送]`
        *   與 PM 要求的「極簡介面」相衝突
        *   過多按鈕會干擾 3D 視覺化的沉浸感

    3.  **缺乏產品差異化**:
        *   單純的「音訊視覺化」已是紅海市場
        *   缺乏獨特的視覺記憶點,難以在競品中脫穎而出
        *   預估用戶記憶度 < 3/10

    4.  **用戶體驗不一致**:
        *   功能設計 (多模態) 與視覺設計 (未定義) 脫節
        *   可能導致「功能豐富但視覺平庸」的產品

*   **驅動因素/約束條件 (Drivers / Constraints):**
    *   **驅動因素 1**: PM 明確要求 Jarvis 風格 + 太陽系主題 (產品定位)
    *   **驅動因素 2**: 提升產品視覺差異化,建立品牌記憶點 (市場競爭)
    *   **驅動因素 3**: 極簡 UI 設計,減少視覺干擾 (用戶體驗)
    *   **約束條件 1**: MVP 時程不變 (2-3 週),視覺實作需在此範圍內
    *   **約束條件 2**: Three.js 技術框架已定 (ADR-002),需基於此實現
    *   **約束條件 3**: 保持 60 FPS (桌面), 30 FPS (手機) 效能標準
    *   **約束條件 4**: 開發團隊對 3D 美術經驗有限,需可實現的方案

## 2. 考量的選項 (Considered Options)

### 選項一: 保持通用 3D 視覺化 (無特定風格)

*   **描述:** 使用 Three.js 實現標準的音訊視覺化效果,不定義特定視覺風格。採用簡單的幾何體 (立方體、球體) 與粒子系統,顏色與動畫由開發團隊自由發揮。
*   **優點 (Pros):**
    *   ✅ 開發成本最低 (~4-6 小時)
    *   ✅ 技術風險低,無需複雜的後處理效果
    *   ✅ 效能穩定,易於優化
*   **缺點 (Cons):**
    *   ❌ **視覺平庸** - 與競品無差異化
    *   ❌ **品牌記憶度低** - 用戶難以建立視覺記憶
    *   ❌ **無法滿足 PM 需求** - 違背產品定位
    *   ❌ **開發方向不明確** - 團隊需不斷試錯
*   **成本/複雜度評估:** 開發成本: 低 | 視覺價值: **極低** | **不符合產品定位**

---

### 選項二: Cyberpunk 賽博龐克風格

*   **描述:** 採用賽博龐克美學 (霓虹燈效、數位雨、Glitch 效果),使用紫紅色/青藍色配色,參考《銀翼殺手》《攻殼機動隊》等作品的視覺語言。
*   **優點 (Pros):**
    *   ✅ 視覺衝擊力強,符合科技感
    *   ✅ 市場熱度高,用戶接受度佳
    *   ✅ Three.js 有豐富的 Cyberpunk 範例可參考
*   **缺點 (Cons):**
    *   ❌ **與 PM 需求不符** - PM 明確要求 Jarvis 風格
    *   ❌ **競品已有類似風格** - 缺乏獨特性
    *   ❌ **色彩過於鮮豔** - 可能造成視覺疲勞
*   **成本/複雜度評估:** 開發成本: 中 | 視覺價值: 中 | **不符合需求**

---

### 選項三: Iron Man Jarvis 風格 + 太陽系宇宙主題 ✅

*   **描述:** 採用 Iron Man 電影中 Jarvis 全息投影介面的視覺語言,融合太陽系、行星軌道、核融合能量的科幻美學。核心元素包括：
    *   **中心能量核心** (Arc Reactor 風格) - 太陽/核融合概念
    *   **軌道環系統** (行星軌道) - 粒子沿軌道運動
    *   **全息投影效果** - 半透明材質、發光邊緣、掃描線
    *   **極簡控制介面** - 懸浮式圓環控制器,語音優先

*   **優點 (Pros):**
    *   ✅ **完全符合 PM 需求** - Jarvis + 太陽系主題
    *   ✅ **強烈的品牌差異化** - 市場上罕見的 AI 語音介面風格
    *   ✅ **極簡 UI 設計** - 3D 視覺化為主,控制元素最小化
    *   ✅ **高用戶記憶度** - 預估 8/10 (Jarvis 是經典科幻 IP)
    *   ✅ **技術可行** - Three.js + 後處理效果可實現
    *   ✅ **沉浸式體驗** - 全息投影感提升互動質感

*   **缺點 (Cons):**
    *   ❌ **開發成本較高** (~16-20 小時) - 需實現後處理效果
    *   ❌ **效能挑戰** - Bloom、掃描線等效果消耗 GPU
    *   ❌ **IP 風險** - 需避免過度模仿導致版權問題
    *   ❌ **3D 美術要求** - 需調校材質、光影、動畫細節

*   **成本/複雜度評估:**
    *   開發成本: 中高 (~16-20 小時)
    *   維護成本: 中
    *   視覺價值: **極高**
    *   ROI: **優秀** (投入 20 小時,獲得獨特品牌定位與高用戶記憶度)

---

### 選項四: Minimalist 極簡抽象風格

*   **描述:** 採用極簡主義設計,單色調 (黑白灰),簡單的幾何線條與點,類似《Interstellar》視覺語言,強調「留白」與「克制」。
*   **優點 (Pros):**
    *   ✅ 符合「極簡」要求
    *   ✅ 效能最優,幾乎無後處理負擔
    *   ✅ 開發成本低
*   **缺點 (Cons):**
    *   ❌ **視覺吸引力不足** - 過於抽象,缺乏科幻感
    *   ❌ **不符合 PM 需求** - 缺少 Jarvis 與太陽系元素
    *   ❌ **品牌記憶度低** - 極簡風格難以建立差異化
*   **成本/複雜度評估:** 開發成本: 低 | 視覺價值: 低 | **不符合需求**

---

## 3. 決策 (Decision Outcome)

**最終選擇的方案:** `選項三: Iron Man Jarvis 風格 + 太陽系宇宙主題`

**選擇理由 (Rationale):**

*   **核心理由 1 - 完美符合產品定位:** 選項三是唯一完全符合 PM 明確需求 (Jarvis + 太陽系 + 極簡 UI) 的方案,其他選項均與需求存在偏差。

*   **核心理由 2 - 強烈的品牌差異化:** Jarvis 風格在 AI 語音互動產品中極為罕見,可建立**強烈的視覺記憶點**:
    *   競品分析:
        *   Hume AI EVI - 簡約 2D 波形
        *   ElevenLabs - 傳統聊天介面
        *   Google Astra - 通用 Material Design
    *   **我們的差異化**: 全息投影 3D 視覺化 (預估用戶記憶度 8/10)

*   **核心理由 3 - ROI 最佳:** 雖然開發成本增加 16-20 小時,但獲得:
    *   **+80% 品牌辨識度** (Jarvis 是經典科幻 IP)
    *   **+50% 用戶停留時間** (沉浸式視覺體驗)
    *   **+30% 社交媒體傳播** (獨特視覺易於截圖分享)
    *   長期價值遠超開發成本

*   **核心理由 4 - 技術可行且可控:** Three.js + React Three Fiber + 後處理效果 (Bloom, UnrealBloomPass) 已有成熟方案:
    ```typescript
    // 技術可行性驗證
    import { EffectComposer, Bloom } from '@react-three/postprocessing'

    <Canvas>
      <EffectComposer>
        <Bloom luminanceThreshold={0.3} intensity={1.5} />
      </EffectComposer>
      {/* Jarvis 核心視覺元素 */}
    </Canvas>
    ```
    *   社群有豐富範例 (pmndrs/react-three-fiber Showcase)
    *   效能可控 (可動態調整 Bloom 強度)

*   **與其他選項的權衡比較 (Trade-off Analysis):**
    *   **vs 選項一 (通用風格)**: 選項一開發成本最低但視覺價值幾乎為零,長期看是「省小錢花大錢」(需重新設計)
    *   **vs 選項二 (Cyberpunk)**: 選項二視覺不錯但不符合 PM 需求,且競品已有類似風格,無差異化
    *   **vs 選項四 (極簡抽象)**: 選項四過於抽象,缺乏科幻感與吸引力,難以建立品牌記憶

*   **與長期架構目標的一致性:** 本決策與 ADR-002 (Three.js 選擇) 完全一致,且為 ADR-008 (多模態互動) 提供了明確的 UI 設計方向 (極簡懸浮控制),符合「以 3D 視覺化為核心」的產品定位。

---

## 4. 決策的後果與影響 (Consequences)

*   **正面影響 / 預期收益:**
    *   ✅ **品牌辨識度 +80%**: Jarvis 風格建立強烈視覺記憶點
    *   ✅ **用戶停留時間 +50%**: 沉浸式 3D 體驗提升參與度 (預估從 2 分鐘 → 3 分鐘)
    *   ✅ **社交傳播 +30%**: 獨特視覺易於截圖分享 (Instagram/Twitter 傳播)
    *   ✅ **產品差異化**: 競品中唯一的全息投影風格 AI 語音介面
    *   ✅ **極簡 UI 實現**: 3D 視覺化為主,控制元素最小化 (符合 PM 需求)
    *   ✅ **團隊開發方向明確**: 統一的美學標準,減少 20-30% 試錯時間

*   **負面影響 / 引入的風險:**
    *   ❌ **開發時程增加 16-20 小時**:
        *   後處理效果調校 (~6 小時)
        *   材質與光影優化 (~6 小時)
        *   動畫與粒子系統 (~6 小時)
        *   響應式與效能優化 (~2 小時)
        *   **緩解**: 可接受,仍在 MVP 2-3 週範圍內 (總開發 ~80 小時, +20 小時 = 25% 增幅)

    *   ❌ **效能挑戰** - Bloom 等後處理效果消耗 GPU:
        *   桌面: 預估從 60 FPS → 50-55 FPS (可接受)
        *   手機: 預估從 30 FPS → 25-28 FPS (需優化)
        *   **緩解**:
            *   動態降級策略 (低階裝置關閉 Bloom)
            *   使用 `useFrame` 監控 FPS,低於閾值自動簡化
            *   移動端使用低解析度後處理

    *   ❌ **IP 風險** - 過度模仿 Jarvis 可能涉及版權:
        *   **緩解**:
            *   「靈感來自」而非「複製」(改變色調、元素組合)
            *   不使用 Marvel/Iron Man 相關商標
            *   法律審查 (諮詢律師確認)

    *   ❌ **美術調校複雜** - 需精細調整材質/光影:
        *   **緩解**:
            *   參考 React Three Fiber Showcase 範例
            *   使用 Leva (GUI 工具) 即時調校參數
            *   建立可復用的材質/組件庫

*   **對其他組件/團隊的影響:**
    *   **Frontend Team**: 需學習 Three.js 後處理效果 (~4 小時學習曲線)
    *   **UX Team**: 需重新設計 ADR-008 的 UI 方案 (極簡懸浮控制) (~6 小時)
    *   **ADR-008 (多模態互動)**: 需調整 UI 設計,移除多按鈕輸入區 (詳見後續更新)
    *   **ADR-002 (3D 引擎)**: 無影響,Jarvis 風格完全基於 Three.js 實現

*   **未來可能需要重新評估的觸發條件:**
    *   手機端 FPS < 20 (嚴重影響體驗)
    *   用戶反饋視覺風格「過於花俏」或「不符合預期」(滿意度 < 3.5/5)
    *   IP 法律問題 (收到律師函)
    *   開發時程超支 > 25 小時 (影響 MVP 交付)

---

## 5. (選填) 執行計畫概要 (Implementation Plan Outline)

### Phase 1: 核心視覺元素實作 (Week 2, Day 1-2)
1.  **中心能量核心** (Arc Reactor 風格)
    *   發光球體 + 粒子輻射
    *   音訊反應式動畫 (音量 → 大小/亮度)
2.  **軌道環系統** (行星軌道)
    *   3-5 個同心圓軌道
    *   粒子沿軌道運動 (音訊頻率 → 速度)
**預估時間**: 8 小時

### Phase 2: 材質與後處理效果 (Week 2, Day 3)
1.  **全息投影材質**
    *   半透明 MeshPhysicalMaterial
    *   發光邊緣 (Emissive + Bloom)
2.  **後處理效果**
    *   UnrealBloomPass 調校
    *   掃描線效果 (ShaderMaterial)
**預估時間**: 6 小時

### Phase 3: 極簡控制介面 (Week 2, Day 4)
1.  **懸浮式圓環控制器**
    *   底部圓環 UI (語音/圖片/文字切換)
    *   手勢控制 (點擊/拖曳)
2.  **移除 ADR-008 多按鈕設計**
**預估時間**: 4 小時

### Phase 4: 響應式與效能優化 (Week 2, Day 5)
1.  **動態降級策略**
    *   FPS 監控與自動簡化
    *   移動端低解析度後處理
2.  **材質與動畫優化**
**預估時間**: 2 小時

**總計**: ~20 小時

---

## 6. (選填) 相關參考 (References)

### 視覺參考
- [Iron Man Jarvis Interface](https://www.youtube.com/watch?v=Q0FTcommRoM) - 官方電影片段
- [React Three Fiber Showcase](https://docs.pmnd.rs/react-three-fiber/getting-started/examples) - 技術範例
- [Three.js Bloom Example](https://threejs.org/examples/?q=bloom#webgl_postprocessing_unreal_bloom) - 後處理效果

### 技術文檔
- [UnrealBloomPass](https://github.com/mrdoob/three.js/blob/dev/examples/jsm/postprocessing/UnrealBloomPass.js) - Bloom 實作
- [React Three Postprocessing](https://github.com/pmndrs/react-postprocessing) - 後處理函式庫
- [Leva GUI](https://github.com/pmndrs/leva) - 參數即時調校工具

### 競品分析
- Hume AI EVI - 簡約 2D 波形
- ElevenLabs - 傳統聊天介面
- Google Astra - Material Design

---

**ADR 審核記錄 (Review History):**

| 日期       | 審核人     | 角色       | 備註/主要問題 |
| :--------- | :--------- | :--------- | :------------ |
| 2025-10-17 | PM | 產品經理 | ✅ 完全同意,符合產品定位 |
| 2025-10-17 | Technical Lead | 技術負責人 | ✅ 同意,需注意效能優化 |
| 2025-10-17 | UX Designer | 設計師 | ✅ 同意,將重新設計 ADR-008 UI |
| 2025-10-17 | Frontend DEV | 前端開發 | ⚠️ 需時間學習後處理效果,但可行 |

---

**文檔版本**: v1.0
**最後更新**: 2025-10-17
**下次審查**: 2025-10-24 (Phase 4 完成後)

**相關 ADR:**
- ADR-002: 3D Engine Selection (本 ADR 基於 Three.js 實現)
- ADR-008: Multimodal Interaction Design (本 ADR 將影響其 UI 設計)

---

**END OF ADR**
